function getUrlVars(){var e={};window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(o,t,n){e[t]=n});return e}function setHour(e,o="fade"){e%=24;var t=hoursXY[e%6],n={value:e,valueHex:e%6,X:t[0],Y:t[1]};transl="translate("+n.X+"px, "+n.Y+"px)",duration=1,mask_opacity="",config.hour=n,e>=0&&e<=5?mask_opacity=.6:e>=6&&e<=11?opacity=0:e>=12&&e<=17?mask_opacity=.4:e>=18&&e<=23&&(mask_opacity=1),"fade"==o?(TweenMax.to(sunMoon[0],2*durationFade,{delay:0,opacity:0}),TweenMax.to(sunMoon[0],0,{delay:3*durationFade,transformOrigin:"50% 50%",css:{transform:transl}}),TweenMax.to(sunMoon[0],4*durationFade,{opacity:1,delay:4*durationFade,ease:Bounce.easeOut}),TweenMax.to(sunMoon[2],40*durationFade,{delay:0,opacity:mask_opacity,ease:Power2.easeOut})):"move"==o&&TweenMax.to(sunMoon[0],duration,{delay:0,transformOrigin:"50% 50%",ease:Power3.easeInOut,css:{transform:transl}}),config.debug&&console.log("new hour set: ",n)}function setMinute(e,o=config.theme){if(e<60){var t=(e/5%12).toFixed(1).toString().split("."),n={value:e,indicator_index:parseInt(t[0]),opacity_index:t[1]/2};if(config.minute=n,0==e)minutes[11];else minutes[(n.indicator_index-1)%12];var a=minutes[n.indicator_index%12],l=minutes[(n.indicator_index+1)%12];for("dark"==o?colors=minutesColors:"light"==o&&(colors=minutesColorsLight),TweenMax.fromTo(a,8*durationFade,{fill:colors.first_start[n.opacity_index],delay:2*durationFade},{fill:colors.first[n.opacity_index],delay:2*durationFade}),TweenMax.fromTo(l,8*durationFade,{fill:colors.second_start[n.opacity_index],delay:2*durationFade},{fill:colors.second[n.opacity_index],delay:2*durationFade}),i=0;i<12;i++)i!=n.indicator_index&&(i%2==0?TweenMax.to(minutes[i],8*durationFade,{fill:"rgba(0,0,0,.07)",delay:0}):TweenMax.to(minutes[i],8*durationFade,{delay:0,fill:"rgba(0,0,0,.04)"}));temp_min=config.minute.value,tmp_min=temp_min<10?"0"+temp_min:temp_min,new_digital_time=config.hour.value+"<i id='digital_clock_sec_ind'>:</i>"+tmp_min,$("#digital_clock").html(new_digital_time),config.debug&&console.log("new minute: ",e)}else console.log("error: minutes can be [0..60]")}function toggleTheme(e){e||(e=config.theme),config.debug&&console.log("curr theme",e),"dark"==e?(new_fill_sunmoon="#040404",new_theme="light"):"light"==e?(new_fill_sunmoon="#ffffff",new_theme="dark"):console.log("wrong theme..."),setMinute(config.minute.value,new_theme),TweenMax.to(sunMoon[1],.5,{fill:new_fill_sunmoon,ease:Power2.easeOut}),$("body").removeClass(e),$("#grad").removeClass(e),$("body").addClass(new_theme),$("#grad").addClass(new_theme),$("#toolbar i.fa").switchClass(new_theme,e,1e3,"easeInOutQuad"),config.debug&&console.log("new theme",new_theme),config.theme=new_theme,updateThemeURL()}function changeColor(e,o=.8){TweenMax.to(background,o,{delay:0,transformOrigin:"50% 50%",css:{fill:e}}),TweenMax.to(sunMoon[2],o,{css:{fill:e}});$("div.pcr-button").css({background:e}),$(".colored.title").css({color:e,textShadow:"rgba(0,0,0,.5) 0 0 3px"}),$("a").css({color:e,textShadow:e+" 0 0 1.5px"}),$("#browserColor").attr("content",e),$("#browserColorwp").attr("content",e),$("#browserColorap").attr("content",e),config.debug&&console.log("new color",e),config.color=e.replace(/\s/g,""),updateThemeURL()}function updateThemeURL(){window.history.replaceState&&window.history.replaceState({color:config.color,theme:config.theme},"newclrtheme","?color="+config.color+"&theme="+config.theme)}function clochToggle(){stopCloch?($("#startstop_cloch").addClass("fa-pause"),$("#startstop_cloch").removeClass("fa-play"),$("#digital_clock").removeClass("paused"),stopCloch=!1):($("#startstop_cloch").addClass("fa-play"),$("#startstop_cloch").removeClass("fa-pause"),$("#digital_clock").addClass("paused"),stopCloch=!0)}function exampleMins(e=500){stopCloch=!0,j=0,setInterval(function(){j<60&&(setMinute(j,config.theme),j++)},e)}function exampleHours(e=1300){stopCloch=!0,i=0,setInterval(function(){i<24&&(setHour(i),i++)},2*e)}function manualTime(e){new_h=parseInt(e.target.value.split(":")[0]),new_m=parseInt(e.target.value.split(":")[1]),new_h!=config.hour.value&&setHour(new_h),new_m!=config.minute.value&&setMinute(new_m)}minutes=[$("#minAng_top"),$("#minMid_rightT"),$("#minAng_topR"),$("#minMid_right"),$("#minAng_bottomR"),$("#minMid_rightB"),$("#minAng_bottom"),$("#minMid_leftB"),$("#minAng_bottomL"),$("#minMid_left"),$("#minAng_topL"),$("#minMid_leftT")],sunMoon=[$("#sunmoon_indicator"),$("#sun"),$("#moon_mask")],cubex=[$("#cubex_top"),$("#cubex_left"),$("#cubex_right")],hoursXY=new Array([-33.8,-19],[0,0],[0,40],[-33.8,58],[-67,38],[-67,0]),durationFade=.1,stopCloch=!1,minutesColorsLight={first_start:["rgba(5,5,5,1)","rgba(5,5,5,1)","rgba(5,5,5,1)","rgba(5,5,5,.7)","rgba(5,5,5,.4)"],second_start:["rgba(0,0,0,.1)","rgba(5,5,5,.1)","rgba(5,5,5,.4)","rgba(5,5,5,.4)","rgba(5,5,5,.7)"],first:["rgba(5,5,5,1)","rgba(5,5,5,1)","rgba(5,5,5,.7)","rgba(5,5,5,.4)","rgba(5,5,5,.4)"],second:["rgba(0,0,0,.1)","rgba(5,5,5,.4)","rgba(5,5,5,.4)","rgba(5,5,5,.7)","rgba(5,5,5,1)"]},minutesColors={first_start:["rgba(255,255,255,1)","rgba(255,255,255,1)","rgba(255,255,255,1)","rgba(255, 255, 255, .7)","rgba(255, 255, 255, .4)"],second_start:["rgba(0,0,0,.1)","rgba(255,255,255,.1)","rgba(255,255,255,.4)","rgba(255, 255, 255, .4)","rgba(255, 255, 255, .7)"],first:["rgba(255,255,255,1)","rgba(255,255,255,1)","rgba(255,255,255,.7)","rgba(255, 255, 255, .4)","rgba(255, 255, 255, .4)"],second:["rgba(0,0,0,.1)","rgba(255,255,255,.4)","rgba(255,255,255,.4)","rgba(255, 255, 255, .7)","rgba(255, 255, 255, 1)"]},window.onload=function(){cloch=$("#cloch"),quadrant=$("#quadranthx"),background=$("#backgroundhx"),cloch.css({opacity:"1"}),config=getUrlVars(),config.color||(config.color="#ff3c6d"),config.theme||(config.theme="dark"),date=new Date,config.hour={value:date.getHours()},config.minute={value:date.getMinutes()},setTimeout(function(){setHour(date.getHours()),setMinute(date.getMinutes(),config.theme),config.debug&&console.log("AUTO time set: ",config.hour,":",config.minute)},0),changeColor(config.color,0),toggleTheme("dark"==config.theme?"light":"dark"),setInterval(function(){stopCloch||(date=new Date,h=date.getHours(),m=date.getMinutes(),h!=config.hour.value&&setHour(h),m!=config.minute.value&&setMinute(m,config.theme)),config.debug&&console.log("AUTO update time: ",h,":",m)},500),$("#toolbarToggle").bind({click:function(){$("#control_buttons").toggleClass("hidden"),$(this).hasClass("showButton")&&$(".subtoolbar").addClass("hidden"),$("#toolbarToggle").toggleClass("showButton")}}),$("#toggle_clockSettings").click(function(){$("#clock_settings").toggleClass("hidden"),$("#palette").addClass("hidden")}),$("#toggle_show").click(function(){$("#toggle_show").toggleClass("fa-eye"),$("#toggle_show").toggleClass("fa-eye-slash"),$("#digital_clock").toggleClass("hidden"),config.debug&&console.log("manual timing toggle")}),$("#startstop_cloch").click(function(){clochToggle(),$("#manual_time_input").prop("disabled",(e,o)=>!o),config.debug&&console.log("start/stop toggled")}),$("#colorpicker").click(function(){$("#palette").toggleClass("hidden"),$("#clock_settings").addClass("hidden"),config.debug&&console.log("palette toggle")}),document.querySelector("#theme_toggle").addEventListener("click",function(){toggleTheme()}),$("#palette>#colors>li").click(function(e){var o=$(e.target).css("background-color");changeColor(o),config.debug&&console.log("palette color chaged to:",o)}),$(".toggleHelp").click(function(){$("#help").toggleClass("hidden"),$("#palette").addClass("hidden"),$("#clock_settings").addClass("hidden"),document.body.classList.toggle("inactive")}),$("body").css("transition","background .8s")};