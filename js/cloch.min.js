function getUrlVars(){var e={};window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(o,t,n){e[t]=n});return e}function setHour(e,o=!0){style="fade",config.hour.value=e%24,config.hour.valueHex=e%6,config.hour.valueDodec=e%12,updateDigitalClock(),coords=o?hoursXY:hoursXYdodec,length=o?6:12,transl="translate("+coords[e%length][0]+"px, "+coords[e%length][1]+"px)",duration=ind_anim_duration,config.hour.value>=0&&config.hour.value<=5?mask_opacity=.6:config.hour.value>=6&&config.hour.value<=11?mask_opacity=0:config.hour.value>=12&&config.hour.value<=17?mask_opacity=.4:mask_opacity=1,gsap.fromTo(sunMoon[0],{opacity:0,transform:transl},{duration:duration,opacity:1,transform:transl,ease:ind_anim_easing}),gsap.to(sunMoon[2],{delay:duration/2,duration:2*duration,opacity:mask_opacity,ease:ind_anim_easing}),config.debug&&console.log("new hour set: ",hour)}function setMinute(e,o=config.theme){if(e<60){for(i=0;i<12;i++)fill=i%2?"rgba(0,0,0,.04)":"rgba(0,0,0,.07)",gsap.to(minutes[i],{fill:fill,delay:0});colors=minutes_sets[o],config.minute.value=e,config.minute.indicator_index=parseInt((e/5%12).toFixed(1).toString().split(".")[0]),config.minute.opacity_index=(e/5%12).toFixed(1).toString().split(".")[1]/2,updateDigitalClock(),first_ind=minutes[config.minute.indicator_index%12],second_ind=minutes[(config.minute.indicator_index+1)%12],gsap.fromTo(first_ind,{opacity:0},{ease:ind_anim_easing,fill:colors.color,opacity:colors.opacity_st[config.minute.opacity_index]}),e%5&&gsap.fromTo(second_ind,{opacity:0},{ease:ind_anim_easing,fill:colors.color,opacity:colors.opacity_nd[config.minute.opacity_index]}),config.debug&&console.log("new minute: ",e)}else console.log("error: minutes can be [0..60]")}function updateDigitalClock(){digital_min=config.minute.value<10?"0"+config.minute.value:config.minute.value,document.querySelector("#digital_clock").innerHTML=config.hour.value+"<i id='digital_clock_sec_ind'>:</i>"+digital_min}function toggleTheme(e){e||(e=config.theme),config.debug&&console.log("curr theme",e),"dark"==e?(new_fill_sunmoon="#040404",new_theme="light"):"light"==e?(new_fill_sunmoon="#ffffff",new_theme="dark"):console.log("wrong theme..."),setMinute(config.minute.value,new_theme),gsap.to(sunMoon[1],.5,{fill:new_fill_sunmoon,ease:ind_anim_easing}),document.querySelector("body").classList.remove(e),document.querySelector("body").classList.add(new_theme),changeImgFilter(config.color),config.debug&&console.log("new theme",new_theme),config.theme=new_theme,updateURL()}function changeColor(e,o=.8){gsap.to(sunMoon[2],o,{css:{fill:e}}),gsap.to(background,o,{delay:0,css:{fill:e}}),document.querySelectorAll(".theme-colored").forEach(o=>{o.setAttribute("style","color:"+e+"; textShadow: rgba(0,0,0,.5) 0 0 3px;")}),document.querySelectorAll(".browser-theme-colored").forEach(t=>{gsap.to(t,o,{delay:0,attr:{content:e}})}),changeImgFilter(e),config.debug&&console.log("new color",e),config.color=e.replace(/\s/g,""),updateURL()}function changeImgFilter(e){rgb=e.substring(4,e.length-1).replace(/ /g,"").split(","),console.log(rgb),hue=RGBToHue(rgb)+20,document.querySelector("body").classList.contains("light")?(hue-=180,filter="hue-rotate("+hue+"deg) invert(1) contrast(1.1)"):filter="hue-rotate("+hue+"deg)",document.querySelectorAll("#help img").forEach(e=>{e.setAttribute("style","filter:"+filter)}),document.querySelector("#covid-kit").setAttribute("style","filter:"+filter)}function RGBToHue([e,o,t]){e/=255,o/=255,t/=255;let n=Math.min(e,o,t),i=Math.max(e,o,t),c=i-n,l=0;return l=0==c?0:i==e?(o-t)/c%6:i==o?(t-e)/c+2:(e-o)/c+4,l=Math.round(60*l),l<0&&(l+=360),l}function updateURL(){window.history.replaceState&&window.history.replaceState({color:config.color,theme:config.theme,hexCloch:config.hexCloch,lang:config.lang},"newclrtheme","?color="+config.color+"&theme="+config.theme+"&hexCloch="+config.hexCloch+"&lang="+config.lang)}function clochToggle(){clochStopped?(startstop_cloch.classList.add("fa-pause"),startstop_cloch.classList.remove("fa-play"),document.querySelector("#digital_clock").classList.remove("paused"),clochStopped=!1):(startstop_cloch.classList.add("fa-play"),startstop_cloch.classList.remove("fa-pause"),document.querySelector("#digital_clock").classList.add("paused"),clochStopped=!0)}function manualTime(e){new_h=parseInt(e.target.value.split(":")[0]),new_m=parseInt(e.target.value.split(":")[1]),new_h!=config.hour.value&&setHour(new_h,config.hexCloch),new_m!=config.minute.value&&setMinute(new_m),config.debug&&console.log(new_time)}function hide(e,o=600){e.classList.add("fake_hidden"),setTimeout(function(){e.classList.remove("fake_hidden"),e.classList.add("hidden")},o)}function show(e){e.classList.remove("hidden")}function toggleView(e){e.classList.contains("hidden")?show(e):hide(e)}function blockUserInput(e,o=600){e.classList.add("noInputEvents"),setTimeout(function(){e.classList.remove("noInputEvents")},o)}function exampleMins(e=500){clochStopped=!0,j=0,setInterval(function(){j<60&&(setMinute(j,config.theme),j++)},e)}function exampleHours(e=1300){clochStopped=!0,i=0,setInterval(function(){i<24&&(setHour(i,config.hexCloch),i++)},2*e)}function toggleLang(){config.lang=document.querySelector("body").classList.contains("it")?"en":"it","it"==config.lang?(document.querySelector("body").classList.add("it"),document.querySelector("body").classList.remove("en"),show_selector="body .it",hide_selector="body .en"):(document.querySelector("body").classList.add("en"),document.querySelector("body").classList.remove("it"),show_selector="body .en",hide_selector="body .it"),duration=.6,document.querySelectorAll(show_selector).forEach(e=>{gsap.fromTo(e,duration,{delay:duration,css:{opacity:0,filter:"blur(5px)",display:"none"}},{css:{opacity:1,filter:"blur(0px)",display:"block"}})}),document.querySelectorAll(hide_selector).forEach(e=>{e.style.display="none"}),updateURL()}minutes=[document.querySelector("#minAng_top"),document.querySelector("#minMid_rightT"),document.querySelector("#minAng_topR"),document.querySelector("#minMid_right"),document.querySelector("#minAng_bottomR"),document.querySelector("#minMid_rightB"),document.querySelector("#minAng_bottom"),document.querySelector("#minMid_leftB"),document.querySelector("#minAng_bottomL"),document.querySelector("#minMid_left"),document.querySelector("#minAng_topL"),document.querySelector("#minMid_leftT")],sunMoon=[document.querySelector("#sunmoon_indicator"),document.querySelector("#sun"),document.querySelector("#moon_mask")],hoursXY=new Array([-33.8,-19],[0,0],[0,40],[-33.8,58],[-67,38],[-67,0]),hoursXYdodec=new Array([-33.8,-19],[-15,-11],[0,0],[2,20],[0,40],[-15,51],[-33.8,58],[-52,51],[-67,38],[-70,20],[-67,0],[-52,-11]),minutes_sets={dark:{color:"rgba(255,255,255,1)",opacity_st:[1,1,.7,.4,.4],opacity_nd:[0,.4,.4,.7,1]},light:{color:"rgba(0,0,0,1)",opacity_st:[1,1,.6,.3,.3],opacity_nd:[0,.3,.3,.6,1]}},durationFade=.1,ind_anim_easing="Power2.easeInOut",ind_anim_duration=1,clochStopped=!1;