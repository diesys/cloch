function getUrlVars(){var e={};window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(o,t,n){e[t]=n});return e}function setHour(e,o="fade"){e%=24;var t=hoursXY[e%6],n={value:e,valueHex:e%6,X:t[0],Y:t[1]};transl="translate("+n.X+"px, "+n.Y+"px)",duration=1,mask_opacity="",config.hour=n,config.theme="light",e>=0&&e<=5?mask_opacity=.6:e>=6&&e<=11?opacity=0:e>=12&&e<=17?mask_opacity=.4:e>=18&&e<=23&&(mask_opacity=1),"fade"==o?(TweenMax.to(sunMoon[0],2*durationFade,{delay:0,opacity:0}),TweenMax.to(sunMoon[0],0,{delay:3*durationFade,transformOrigin:"50% 50%",css:{transform:transl}}),TweenMax.to(sunMoon[0],4*durationFade,{opacity:1,delay:4*durationFade,ease:Bounce.easeOut}),TweenMax.to(sunMoon[2],40*durationFade,{delay:0,opacity:mask_opacity,ease:Power2.easeOut})):"move"==o&&TweenMax.to(sunMoon[0],duration,{delay:0,transformOrigin:"50% 50%",ease:Power3.easeInOut,css:{transform:transl}}),config.debug&&console.log("new hour set: ",n)}function setMinute(e,o="light"){if(e<60){var t=(e/5%12).toFixed(1).toString().split("."),n={value:e,indicator_index:parseInt(t[0]),opacity_index:t[1]/2};if(config.minute=n,0==e)minutes[11];else minutes[(n.indicator_index-1)%12];var a=minutes[n.indicator_index%12],r=minutes[(n.indicator_index+1)%12];if("light"==o)for(TweenMax.fromTo(a,8*durationFade,{fill:minutesColors.first_start[n.opacity_index],delay:2*durationFade},{fill:minutesColors.first[n.opacity_index],delay:2*durationFade}),TweenMax.fromTo(r,8*durationFade,{fill:minutesColors.second_start[n.opacity_index],delay:2*durationFade},{fill:minutesColors.second[n.opacity_index],delay:2*durationFade}),i=0;i<12;i++)i!=n.indicator_index&&(i%2==0?TweenMax.to(minutes[i],8*durationFade,{fill:"rgba(0,0,0,.07)",delay:0}):TweenMax.to(minutes[i],8*durationFade,{delay:0,fill:"rgba(0,0,0,.04)"}));else if("dark"==o)for(TweenMax.fromTo(a,8*durationFade,{fill:minutesColorsDark.first_start[n.opacity_index],delay:2*durationFade},{fill:minutesColorsDark.first[n.opacity_index],delay:2*durationFade}),TweenMax.fromTo(r,8*durationFade,{fill:minutesColorsDark.second_start[n.opacity_index],delay:2*durationFade},{fill:minutesColorsDark.second[n.opacity_index],delay:2*durationFade}),i=0;i<12;i++)i!=n.indicator_index&&(i%2==0?TweenMax.to(minutes[i],8*durationFade,{fill:"rgba(0,0,0,.05)",delay:0}):TweenMax.to(minutes[i],8*durationFade,{delay:0,fill:"rgba(0,0,0,.02)"}));temp_min=config.minute.value,tmp_min=temp_min<10?"0"+temp_min:temp_min,new_digital_time=config.hour.value+":"+tmp_min,$("#digital_clock").html(new_digital_time),config.debug&&console.log("new minute: ",e)}else console.log("error: minutes can be [0..60]")}function changeTheme(e){if($("body").attr("class",e),$("#grad").attr("class",e),"dark"==e){for(setMinute(config.minute.value,"dark"),TweenMax.to(sunMoon[1],.5,{fill:"#040404",ease:Power2.easeOut}),i=0;i<3;i++)TweenMax.to(cubex[i],.5,{fill:"rgba(0,0,0,.75)",ease:Power2.easeOut});$("#toolbar i.fa").switchClass("light","dark",1e3,"easeInOutQuad")}else if("light"==e){for(setMinute(config.minute.value,"light"),TweenMax.to(sunMoon[1],.5,{fill:"#ffffff",ease:Power2.easeOut}),i=0;i<3;i++)TweenMax.to(cubex[i],.5,{fill:"#000000",ease:Power2.easeOut});$("#toolbar i.fa").switchClass("dark","light",1e3,"easeInOutQuad")}config.theme=e}function changeColor(e,o=.8){TweenMax.to(background,o,{delay:0,transformOrigin:"50% 50%",css:{fill:e}}),TweenMax.to(sunMoon[2],o,{delay:0,transformOrigin:"50% 50%",css:{fill:e}});$("div.pcr-button").css({background:e}),$("#browserColor").attr("content",e),$("#browserColorwp").attr("content",e),$("#browserColorap").attr("content",e),config.debug&&console.log("new color",e),config.color=e.replace(/\s/g,""),addClrToURL()}function addClrToURL(){window.history.replaceState&&window.history.replaceState({color:config.color},"newcolor","?color="+config.color)}function clochToggle(){stopCloch?($("#startstop_cloch").attr("class","fa fa-pause"),stopCloch=!1):($("#startstop_cloch").attr("class","fa fa-play"),stopCloch=!0)}function exampleMins(e=500){stopCloch=!0,j=0,setInterval(function(){j<60&&(setMinute(j),j++)},e)}function exampleHours(e=1300){stopCloch=!0,i=0,setInterval(function(){i<24&&(setHour(i),i++)},2*e)}minutes=[$("#minAng_top"),$("#minMid_rightT"),$("#minAng_topR"),$("#minMid_right"),$("#minAng_bottomR"),$("#minMid_rightB"),$("#minAng_bottom"),$("#minMid_leftB"),$("#minAng_bottomL"),$("#minMid_left"),$("#minAng_topL"),$("#minMid_leftT")],sunMoon=[$("#sunmoon_indicator"),$("#sun"),$("#moon_mask")],cubex=[$("#cubex_top"),$("#cubex_left"),$("#cubex_right")],hoursXY=new Array([-33.8,-19],[0,0],[0,40],[-33.8,58],[-67,38],[-67,0]),durationFade=.1,stopCloch=!1,minutesColorsDark={first_start:["rgba(5,5,5,1)","rgba(5,5,5,1)","rgba(5,5,5,1)","rgba(5,5,5,.7)","rgba(5,5,5,.4)"],second_start:["rgba(0,0,0,.1)","rgba(5,5,5,.1)","rgba(5,5,5,.4)","rgba(5,5,5,.4)","rgba(5,5,5,.7)"],first:["rgba(5,5,5,1)","rgba(5,5,5,1)","rgba(5,5,5,.7)","rgba(5,5,5,.4)","rgba(5,5,5,.4)"],second:["rgba(0,0,0,.1)","rgba(5,5,5,.4)","rgba(5,5,5,.4)","rgba(5,5,5,.7)","rgba(5,5,5,1)"]},minutesColors={first_start:["rgba(255,255,255,1)","rgba(255,255,255,1)","rgba(255,255,255,1)","rgba(255, 255, 255, .7)","rgba(255, 255, 255, .4)"],second_start:["rgba(0,0,0,.1)","rgba(255,255,255,.1)","rgba(255,255,255,.4)","rgba(255, 255, 255, .4)","rgba(255, 255, 255, .7)"],first:["rgba(255,255,255,1)","rgba(255,255,255,1)","rgba(255,255,255,.7)","rgba(255, 255, 255, .4)","rgba(255, 255, 255, .4)"],second:["rgba(0,0,0,.1)","rgba(255,255,255,.4)","rgba(255,255,255,.4)","rgba(255, 255, 255, .7)","rgba(255, 255, 255, 1)"]},window.onload=function(){cloch=$("#cloch"),quadrant=$("#quadranthx"),background=$("#backgroundhx"),cloch.css({opacity:"1"}),config=getUrlVars(),config.color||(config.color="#ff3c6d"),changeColor(config.color,0),date=new Date,config.hour={value:date.getHours()},config.minute={value:date.getMinutes()},setTimeout(function(){setHour(date.getHours()),setMinute(date.getMinutes()),config.debug&&console.log("AUTO time set: ",config.hour,":",config.minute)},0),setInterval(function(){stopCloch||(date=new Date,h=date.getHours(),m=date.getMinutes(),h!=config.hour.value&&setHour(h),m!=config.minute.value&&setMinute(m,config.theme)),config.debug&&console.log("AUTO update time: ",h,":",m)},500),$("#toolbarToggle").bind({click:function(){$("#control_buttons").fadeToggle(),setTimeout(function(){$("#control_buttons").is(":hidden")?$("#toolbarToggle").css("transform","rotate(0deg"):$("#toolbarToggle").css("transform","rotate(180deg)")},600)}}),$(function(){$("#sel_hour").selectmenu({change:function(e,o){setHour(o.item.value)}}),$("#sel_minute").selectmenu({change:function(e,o){setMinute(o.item.value)}})}),$("#toggle_show").click(function(){$("#toggle_stop_menu").fadeToggle(),config.debug&&console.log("manual timing toggle")}),$("#startstop_cloch").click(function(){clochToggle(),config.debug&&console.log("start/stop toggled")}),$("#colorpicker").click(function(){$("#palette").fadeToggle(),config.debug&&console.log("palette toggle")}),$("#theme_toggle").click(function(){"light"==config.theme?changeTheme("dark"):changeTheme("light")}),$("ol#palette>li").click(function(e){var o=$(e.target).css("background-color");changeColor(o),config.debug&&console.log("palette color chaged to:",o)}),$("#toggle_help").click(function(){$("#help").fadeToggle(),$("#toolbarToggle").fadeToggle(),$("#colorpicker").fadeToggle(),$("#toggle_show").fadeToggle()}),$("#toggle_stop_menu").hide(),$("#control_buttons").hide(),$("#palette").hide(),$("body").css("transition","background .8s"),setMinute(config.minute.value,config.theme)};