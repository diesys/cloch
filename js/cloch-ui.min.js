window.onload=function(){document.querySelector("#cloch").setAttribute("style","opacity: 1"),quadrant=document.querySelector("#quadranthx"),background=document.querySelector("#backgroundhx"),toggle_toolbar=document.querySelector("#toggle_toolbar"),subToolbars=document.querySelectorAll(".subtoolbar"),toolbar_buttons=document.querySelector("#toolbar_buttons"),toggle_theme=document.querySelector("#toggle_theme"),toggle_palette=document.querySelector("#toggle_palette"),palette=document.querySelector("#palette"),paletteColors=document.querySelectorAll("#palette>#colors>li"),toggle_digitalClock=document.querySelector("#toggle_digital_clock"),toggle_hex_dodec=document.querySelector("#toggle_hex_dodec"),digital_clock=document.querySelector("#digital_clock"),toggle_clock_settings=document.querySelector("#toggle_clock_settings"),clock_settings=document.querySelector("#clock_settings"),startstop_cloch=document.querySelector("#startstop_cloch"),manual_time_input=document.querySelector("#manual_time_input"),helpToggles=document.querySelectorAll(".toggleHelp"),helpPanel=document.querySelector("#help"),config=getUrlVars(),config.color||(config.color="rgb(255,60,109)",config.first_visit=!0),config.theme||(config.theme="dark"),config.hexCloch?"true"!=config.hexCloch&&(config.hexCloch=!1,toggle_hex_dodec.classList.remove("hexCloch")):config.hexCloch=!0,"en"==config.lang?this.toggleLang():(config.lang="it",document.querySelectorAll("body *.en").forEach(e=>{e.setAttribute("style","display:none !important")})),date=new Date,config.hour={value:date.getHours()},config.minute={value:date.getMinutes()},setTimeout(function(){setHour(date.getHours(),config.hexCloch),setMinute(date.getMinutes(),config.theme),config.debug&&console.log("AUTO time set: ",config.hour,":",config.minute)},0),changeColor(config.color,0),toggleTheme("dark"==config.theme?"light":"dark"),setInterval(function(){clochStopped||(date=new Date,h=date.getHours(),m=date.getMinutes(),h!=config.hour.value&&setHour(h,config.hexCloch),m!=config.minute.value&&setMinute(m,config.theme)),config.debug&&console.log("AUTO update time: ",h,":",m)},500),toggle_toolbar.addEventListener("click",function(){blockUserInput(toggle_toolbar),toolbar_buttons.classList.toggle("hidden"),this.classList.contains("opened")&&subToolbars.forEach(e=>{hide(e)}),toggle_toolbar.classList.toggle("opened")}),toggle_clock_settings.addEventListener("click",function(){blockUserInput(toggle_clock_settings),toggleView(clock_settings),hide(palette)}),toggle_digitalClock.addEventListener("click",function(){blockUserInput(toggle_digitalClock),toggle_digitalClock.classList.toggle("fa-eye"),toggle_digitalClock.classList.toggle("fa-eye-slash"),digital_clock.classList.toggle("hidden"),config.debug&&console.log("manual timing toggle")}),toggle_hex_dodec.addEventListener("click",function(){this.classList.toggle("hexCloch"),config.hexCloch=!Boolean(config.hexCloch),setHour(config.hour.value,config.hexCloch),updateURL()}),startstop_cloch.addEventListener("click",function(){blockUserInput(startstop_cloch),clochToggle(),manual_time_input.disabled^=!0,config.debug&&console.log("start/stop toggled")}),toggle_palette.addEventListener("click",function(){blockUserInput(toggle_palette),toggleView(palette),hide(clock_settings),config.debug&&console.log("palette toggle")}),paletteColors.forEach(e=>{e.addEventListener("click",function(e){changeColor(e.target.getAttribute("data-color"))}),config.debug&&console.log("palette color chaged to:",color)}),toggle_theme.addEventListener("click",function(){toggleTheme()}),helpToggles.forEach(e=>{e.addEventListener("click",function(){blockUserInput(e),toggleView(helpPanel),hide(palette),hide(clock_settings),document.body.classList.toggle("inactive")}),config.debug&&console.log("Help toggled")}),config.first_visit&&(show(help),document.querySelector("body").classList.add("inactive"))};